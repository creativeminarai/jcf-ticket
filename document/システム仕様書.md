# システム仕様書

## 概要

### システム名

#### JCF-Ticket

### システム概要

#### JCF-Ticketは、JCF（Japan Coffee Festival）のチケット管理システムです

### システムの目的

#### JCF-Ticketは、JCFのチケット管理を容易にすることを目的としています

#### また、これまでアナログだった、チケット販売から使用・管理までの一連の流れをデジタル化することを目的としています

### システムの構成

- Next.js
- TypeScript
- TailwindCSS
- PostgreSQL（supabase）
- Vercel
- Stripe

### DB構成

- PostgreSQL（supabase）

## 画面設計

#### イベント一覧ページ（イベントのカードを表示）

＊UIは変更しない。データの切り替えのみ。

#### イベント詳細ページ

＊UIは変更しない。データの切り替えのみ。
＊購入の画面などは後ほど実装。

#### マスタページ

#### QRコード読み取りモーダル

＊QRコードを読み取るためのモーダルです。
＊QRコード：出店者のIDを表す文字列
＊出店者のIDを取得したら、出店者の情報とチケットの情報を表示する
＊QRコードを読み取るためのライブラリは、html5-qrcodeを使用する
＊出店者の情報とチケットの情報は、supabaseから取得する
＊出店者の情報とチケットの情報は、出店者のIDをキーに取得する
＊QRコード読み取りボタンの下に、手動で入力できる出店者のIDを入力する入力欄も設ける。
＊端末によってQRコードリーダーがうまく動作しない可能性があるため、手動で入力する方法も提供する

#### チケットの使用確認モーダル

＊上記で使用した出店者の情報とチケットの情報を表示する
＊「使用する」ボタンを表示する。
＊「使用する」ボタンを押すと、チケットの使用日時を更新する
＊「使用する」ボタンを押すと、結果モーダルへ遷移

#### チケットの使用結果モーダル

＊チケットの使用日時を更新した結果を表示する
＊使用した出店者の情報とチケットの情報を表示する
＊不正に画面を流用させないため、5分以上経過している場合は「取得してから〇〇分以上経過しています。」を表示する。
＊〇〇分のところは5分単位でわかりやすく赤字で表示する。
＊「戻る」ボタンを表示する。
＊「戻る」ボタンを押すと、結果モーダルを閉じる

#### Admin：出店者管理ページ（一覧・編集）

＊イベントを最初に選択させる。（どのイベントの出店者かで最初にフィルタする）
＊イベントに紐づく出店者の一覧を表示する。番号、運命の比重、チケット枚数、チケットの情報（運命チケットの使用枚数、全店舗チケットの使用枚数）も表示する。
＊運命の比重は整数で0から10までの数値
＊「編集」ボタンを押すと、出店者の情報を編集できるモーダルが開く。
＊「編集」ページで、出店者の情報（番号、店名、出品コーヒー、ご挨拶、運命の比重、チケット枚数、URL、画像の選択）を編集する
＊画像はsupabaseのストレージから設定したい。すでにアップロードしてあるものから選択できるようにできるか？
＊出店者のCSV登録を実装する。

#### Admin：チケット検索・一覧ページ

＊チケットの一覧を表示する
＊「検索」ボタンを押すと、チケットの検索を実行する
＊「検索」ボタンを押すと、結果モーダルへ遷移
＊「検索」ページで、チケットの情報を検索する
＊移行済みのチケットは「移行済み」と表示
＊どのユーザーのチケットかわかるように。
＊運命チケット、全店舗チケットどちらも検索して表示する。
＊運命チケット、全店舗チケットの検索結果は別々のテーブルで表示する。

#### Admin：チケット移行モーダル

＊チケットの移行を実行する
＊「移行」ボタンを押すと、チケットの移行を実行する
＊移行すると、移行履歴テーブルにレコードを新規作成
＊「移行」ボタンを押すと、結果モーダルへ遷移
＊結果モーダルで、移行したチケットの情報を表示する

#### Admin：移行履歴ページ

＊移行履歴を表示する
＊「検索」ボタンを押すと、移行履歴の検索を実行する
＊「検索」ボタンを押すと、結果モーダルへ遷移
＊「検索」ページで、移行履歴の情報を検索する
＊移行済みのチケットは「移行済み」と表示
＊どのユーザーのチケットかわかるように。
＊運命チケット、全店舗チケットどちらも検索して表示する。
＊運命チケット、全店舗チケットの検索結果は別々のテーブルで表示する。

#### Admin：チケット種別ページ

＊チケット種別の一覧を表示する。
＊現在の価格と有効期間の一覧も表示する。
＊編集、登録、削除できるようにする。
